(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{133:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(1)),r=s(n(0)),a=(s(n(54)),s(n(48)),n(10)),l=n(92);function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.word,n=e.collocs,r=e.fn,a=e.fetchingMap,s=n[t];return a[t]?o.default.createElement("div",{className:"clear-notification-message"},o.default.createElement("em",null,"Loading...")):s.error?o.default.createElement("div",{className:"notify-warn"},"No collocations"):s.map(function(e){var t={expression:e.expression},n=e.translation?0:1;return n||(t.trans=[{trans:e.translation}]),e.example&&(t.trans[0].exmpl=[{exmpl:e.example}]),n?o.default.createElement("div",{className:"etym-style"},o.default.createElement("a",{target:"_blank",href:"/api/word/"+e.expression,onClick:function(t){return r(t,e.expression)},className:"word-link"},e.expression)):o.default.createElement("ul",{className:"etym-style"},(0,l.renderList)([t],r,l.listStyles,0))})};i.propTypes={word:r.default.string.isRequired,collocs:r.default.object.isRequired,fetchingMap:r.default.object.isRequired,fn:r.default.func.isRequired},t.default=(0,a.connect)(function(e){return{collocs:e.collocations.allCollocations,fetchingMap:e.collocations.fetchingMap,newTrans:e.collocations.translations}})(i)},134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(1)),r=s(n(0)),a=s(n(54)),l=(s(n(48)),n(10));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.word,n=e.synonyms,r=e.fn,l=e.fetchingMap;console.log(n),console.log(t),console.log(l);var s=n[t];return l[t]?o.default.createElement("em",null,"Loading..."):s.error?o.default.createElement("div",{className:"notify-warn"},"No synonyms"):Object.keys(s).map(function(e){return o.default.createElement("div",{className:"etym-style"},o.default.createElement("p",{className:"heading lang-head lang-"+e},e),o.default.createElement(a.default,{words:s[e].join(", "),onLinkClick:r}))})};i.propTypes={word:r.default.string.isRequired,synonyms:r.default.object.isRequired,fetchingMap:r.default.object.isRequired,fn:r.default.func.isRequired},t.default=(0,l.connect)(function(e){return{synonyms:e.synonyms.allSynonyms,fetchingMap:e.synonyms.fetchingMap}})(i)},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=i(n(1)),a=i(n(0)),l=(i(n(48)),n(93)),s=n(10);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={note:""},n.handleChange=n.handleChange.bind(n),n.handleAddNote=n.handleAddNote.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"handleChange",value:function(e){this.props.fetched&&this.props.clearFetchedNote(),this.setState({note:e.target.value})}},{key:"handleAddNote",value:function(e){e.preventDefault(),console.log("adding note");var t=this.props,n=t.word,o=t.notes,r=t.fetchingMap,a=this.state.note?this.state.note:o[n]?o[n].note:"";a&&(this.props.requestNote(n,r),this.props.postNote(n,a,o,r))}},{key:"render",value:function(){var e=this,t=this.props,n=t.word,o=t.notes,a=t.fetchingMap,l=this.props.fetched?o[n]?o[n].note:"":this.state.note;return console.log(o),console.log("i have this note: "+l),a[n]?r.default.createElement("em",null,"Loading..."):r.default.createElement("form",{className:"add-note-form",onSubmit:this.handleAddNote},r.default.createElement("textarea",{className:"note-txtarea",value:l,onChange:this.handleChange}),r.default.createElement("a",{className:"add-note-btn",onClick:function(t){return e.handleAddNote(t)}},"Add Note"))}}]),t}();u.propTypes={word:a.default.string.isRequired,note:a.default.string.isRequired,fetchingMap:a.default.object.isRequired};var c={postNote:l.postNote,requestNote:l.requestNote,clearFetchedNote:l.clearFetchedNote};t.default=(0,s.connect)(function(e){return{notes:e.notes.allNotes,fetchingMap:e.notes.fetchingMap,fetched:e.notes.fetchedNote}},c)(u)},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchTab=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(5);t.switchTab=function(e,t,n){return function(a){console.log("switching tab"),a({type:r.SWITCH_TAB,payload:o({},n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,e))})}}},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestTranslations=t.lookUpTranslations=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(5),a=n(66);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.lookUpTranslations=function(e,t,n){return function(s){console.log("fetching word translation"),fetch("api/word/translate/"+e).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(i){var u=i.status,c=i.json;u>=400?(console.log("Server returned error status"),s({type:r.FETCH_TRANSLATION_REJECTED,payload:{allTranslations:o({},t,l({},e,{error:!0})),fetchingMap:o({},n,l({},e,!1))}})):s({type:r.FETCH_TRANSLATION_FULFILLED,payload:{allTranslations:o({},t,l({},e,(0,a.translationsToMap)(c))),fetchingMap:o({},n,l({},e,!1))}})},function(e){console.log("problems"),s({type:r.FETCH_TRANSLATION_REJECTED,payload:"fetching translation failed"})})}},t.requestTranslations=function(e,t){return function(n){console.log("requesting word translation"),n({type:r.FETCH_TRANSLATION,payload:o({},t,l({},e,!0))})}}},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestCollocations=t.lookUpCollocations=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(5);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.lookUpCollocations=function(e,t,n){return function(l){console.log("fetching word collocations"),fetch("api/word/collocations/"+e).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(s){var i=s.status,u=s.json;i>=400?(console.log("Server returned error status"),l({type:r.FETCH_COLLOCATIONS_REJECTED,payload:{allCollocations:o({},t,a({},e,{error:!0})),fetchingMap:o({},n,a({},e,!1))}})):l({type:r.FETCH_COLLOCATIONS_FULFILLED,payload:{allCollocations:o({},t,a({},e,u)),fetchingMap:o({},n,a({},e,!1))}})},function(e){console.log("problems"),l({type:FETCH_TRANSLATION_REJECTED,payload:"fetching translation failed"})})}},t.requestCollocations=function(e,t){return function(n){console.log("requesting word collocation"),n({type:r.FETCH_COLLOCATIONS,payload:o({},t,a({},e,!0))})}}},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestSynonyms=t.lookUpSynonyms=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(5),a=n(66);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.lookUpSynonyms=function(e,t,n){return function(s){console.log("fetching word synonyms"),fetch("api/word/synonyms/"+e).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(i){var u=i.status,c=i.json;u>=400?(console.log("Server returned error status"),s({type:r.FETCH_SYNONYMS_REJECTED,payload:{allSynonyms:o({},t,l({},e,{error:!0})),fetchingMap:o({},n,l({},e,!1))}})):s({type:r.FETCH_SYNONYMS_FULFILLED,payload:{allSynonyms:o({},t,l({},e,(0,a.translationsToMap)(c))),fetchingMap:o({},n,l({},e,!1))}})},function(e){console.log("problems"),s({type:r.FETCH_SYNONYMS_REJECTED,payload:"fetching synonyms failed"})})}},t.requestSynonyms=function(e,t){return function(n){console.log("requesting word synonyms"),n({type:r.FETCH_SYNONYMS,payload:o({},t,l({},e,!0))})}}},140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=u(r),l=u(n(0)),s=n(10),i=n(78);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={word:""},n.handleWordChange=n.handleWordChange.bind(n),n.onSubmit=n.onSubmitLookUp.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"handleWordChange",value:function(e){this.props.error&&this.props.clearError(),this.setState({word:e.target.value})}},{key:"onSubmitLookUp",value:function(e){e.preventDefault(),console.log("looking up"),console.log(this.props.allWordsMap),this.props.allWordsMap[this.state.word]||(this.props.requestWord(),this.props.lookUpWord(this.state.word,this.props.allWords,this.props.uuid)),this.setState({word:""})}},{key:"render",value:function(){var e=this,t=this.props.fetching,n=this.props.error?this.props.word:this.state.word;return console.log("rendering new word form"),t?a.default.createElement("div",{className:"new-word"},a.default.createElement("p",{className:"grid-notification"},a.default.createElement("em",null,"Loading..."))):a.default.createElement("form",{className:"new-word",onSubmit:function(t){return e.onSubmitLookUp(t)}},a.default.createElement("input",{className:"new-word-input",type:"text",placeholder:"New Word",value:n,onChange:this.handleWordChange}),a.default.createElement("a",{className:"new-word-btn look-up-btn",onClick:function(t){return e.onSubmitLookUp(t)}},"Look Up"),this.props.error?a.default.createElement("div",{className:"grid-warn"},"Can't load word"):"")}}]),t}();c.propTypes={lookUpWord:l.default.func.isRequired,requestWord:l.default.func.isRequired},t.default=(0,s.connect)(function(e){return{uuid:e.collections.uuid,allWordsMap:e.words.allWordsMap,allWords:e.words.items,fetching:e.words.newWordFetching,error:e.words.error,word:e.words.word,user:e.auth.user}},{lookUpWord:i.lookUpWord,requestWord:i.requestWord,clearError:i.clearError})(c)},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=d(r),l=d(n(11)),s=d(n(0)),i=n(10),u=n(94),c=n(17),f=n(16);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={name:""},n.handleNameChange=n.handleNameChange.bind(n),n.onSubmit=n.onSubmitSave.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillMount",value:function(){console.log("mounting save bar")}},{key:"handleNameChange",value:function(e){this.props.fetched&&this.props.clearFetched(),this.setState({name:e.target.value})}},{key:"onSubmitSave",value:function(e){e.preventDefault(),console.log("saving"),this.props.requestSave();var t=this.props.uuid,n=this.state.name?this.state.name:this.props.name;this.props.saveCollection(n,t,this.props.allWords.map(function(e){return e.word}).join(","));var o=l.default.findDOMNode(this).parentNode;window.scrollTo(0,o.offsetTop-35),this.setState({name:""})}},{key:"render",value:function(){var e=this,t=this.props.allWords,n=this.props.saving,o=this.props.fetched?this.props.name:this.state.name;console.log(this.props.error);var r=this.props.auth;return r.isAuthenticated?t.length?n?a.default.createElement("div",{className:"colls-footer"},a.default.createElement("div",{className:"save-coll"},a.default.createElement("p",{className:"grid-notification"},a.default.createElement("em",null,"Saving..."))),a.default.createElement("div",{className:"user-tag"},r.user.username," (",a.default.createElement("a",{onClick:this.props.logout},"logout"),")")):a.default.createElement("div",{className:"colls-footer"},a.default.createElement("form",{className:"save-coll",onSubmit:function(t){return e.onSubmitSave(t)}},a.default.createElement("input",{class:"save-coll-input",type:"text",placeholder:"Save Collection",value:o,onChange:this.handleNameChange}),a.default.createElement("a",{className:"save-btn",onClick:function(t){return e.onSubmitSave(t)}},"Save Words"),this.props.error?a.default.createElement("p",{className:"grid-warn"},"Can't save this collection"):""),a.default.createElement("div",{className:"user-tag"},r.user.username," (",a.default.createElement("a",{onClick:this.props.logout},"logout"),")")):a.default.createElement("div",{className:"colls-footer"},a.default.createElement("div",{className:"user-tag"},r.user.username," (",a.default.createElement("a",{onClick:this.props.logout},"logout"),")")):t.length?this.props.error?a.default.createElement("div",{className:"coll-invite"},"To work with collections, please, ",a.default.createElement(f.Link,{className:"is-link",to:"/login"},"login")," or ",a.default.createElement(f.Link,{className:"is-link",to:"/register"},"register")):a.default.createElement("div",{className:"colls-footer"},a.default.createElement("div",{className:"coll-invite"},a.default.createElement(f.Link,{className:"is-link",to:"/login"},"Login")," or ",a.default.createElement(f.Link,{className:"is-link",to:"/register"},"Register")," to save this collection of words")):""}}]),t}();p.propTypes={saveCollection:s.default.func.isRequired,logout:s.default.func.isRequired,requestSave:s.default.func.isRequired,name:s.default.string.isRequired,uuid:s.default.string.isRequired},t.default=(0,i.connect)(function(e){return{allWords:e.words.items,saving:e.collections.saving,fetched:e.collections.fetched,name:e.collections.name,uuid:e.collections.uuid,error:e.collections.error,auth:e.auth}},{logout:c.logout,loadUser:c.loadUser,saveCollection:u.saveCollection,requestSave:u.requestSave,clearFetched:u.clearFetched})(p)},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=f(r),l=f(n(0)),s=(f(n(48)),n(10)),i=n(94),u=n(17),c=n(78);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSidebarOpen:!1},n.onCollectionClick=n.onCollectionClick.bind(n),n.handleSidebarOpen=n.handleSidebarOpen.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillMount",value:function(){console.log("mounting sidebar"),this.props.auth.isAuthenticated&&(this.props.requestCollections(),this.props.fetchCollections())}},{key:"onCollectionClick",value:function(e,t){console.log("collection look up"),e.preventDefault(),this.setState({isSidebarOpen:!1}),this.props.requestCollection();var n=this.props.origUUId;n&&this.props.saveCollection(this.props.origName,n,this.props.allWords.map(function(e){return e.word}).join(",")),this.props.fetchCollection(t)}},{key:"handleSidebarOpen",value:function(e){this.state.isSidebarOpen?this.setState({isSidebarOpen:!1}):this.setState({isSidebarOpen:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.colls;return t.auth.isAuthenticated&&n.length?a.default.createElement("div",{className:"colls-sidebar"},a.default.createElement("input",{type:"checkbox",className:"colls-toggle",id:"colls-toggle",checked:this.state.isSidebarOpen,onChange:this.handleSidebarOpen}),a.default.createElement("div",{className:"colls-list"},a.default.createElement("ul",{className:"coll-ul"},n.map(function(t){return a.default.createElement("li",null,a.default.createElement("a",{target:"_blank",href:"/api/collection/"+t.uuid,onClick:function(n){return e.onCollectionClick(n,t.uuid)},className:"coll-link"},a.default.createElement("span",{className:"coll-name"},t.name)," ",a.default.createElement("span",{className:"coll-date"},t.last_modified_date)))}))),a.default.createElement("label",{for:"colls-toggle",className:"colls-toggle-label"},a.default.createElement("span",null,"Collections"))):a.default.createElement("div",{className:"colls-sidebar"},a.default.createElement("div",{className:"colls-empty"}))}}]),t}();d.propTypes={items:l.default.array.isRequired},t.default=(0,s.connect)(function(e){return{colls:e.collections.items,auth:e.auth,origUUId:e.collections.uuid,origName:e.collections.name,allWords:e.words.items}},{loadUser:u.loadUser,requestCollections:i.requestCollections,requestWords:c.requestWords,fetchCollections:i.fetchCollections,fetchCollection:i.fetchCollection,saveCollection:i.saveCollection,requestCollection:i.requestCollection})(d)},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(1)),r=i(n(95)),a=i(n(140)),l=i(n(141)),s=i(n(142));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.default.createElement("div",{className:"dict-container"},o.default.createElement(a.default,null),o.default.createElement(r.default,null),o.default.createElement(s.default,null),o.default.createElement(l.default,null))}},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=s(r),l=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var i=n(97),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"render",value:function(){var e=this.props,t=(e.words,e.onLinkClick),n=i([{regex:/(\{)(.*?)(\})/gm,fn:function(e,t){return a.default.createElement("span",{className:"word-meaning"},t[2])}},{regex:/([a-zA-Z\-À-ÿА-Я\ǣāēіїœ]+)/gim,fn:function(e,n){return a.default.createElement("a",{target:"_blank",href:"/api/word/"+n[1],onClick:function(e){return t(e,n[1])},className:"word-link"},n[1])}}])(this.props.words);return a.default.createElement("div",null,n)}}]),t}();u.propTypes={words:l.default.array,onLinkClick:l.default.func.isRequired};l.default.string,t.default=u},66:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});t.conflateWords=function(e){console.log("conflating");var t=[],n={},r=!0,a=!1,l=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var u=s.value,c=u.word;n[c]?n[c]=[].concat(o(n[c]),[{language:u.language,etymology:u.word_etymologies}]):(n[c]=[{language:u.language,etymology:u.word_etymologies}],t.push(c))}}catch(e){a=!0,l=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw l}}return t.map(function(e){return{word:e,description:n[e]}})},t.translationsToMap=function(e){return e.reduce(function(e,t){return e[t.language]=[].concat(o(e[t.language]?e[t.language]:""),[t.notes?t.word+" {"+t.notes+"}":t.word]),e},{})}},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lookUpWord=t.fetchWords=t.requestWord=t.clearError=t.requestWords=void 0;var o=n(5),r=n(66);function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.requestWords=function(){return function(e){e({type:o.FETCH_WORDS})}},t.clearError=function(){return function(e){e({type:o.CLEAR_ERROR})}},t.requestWord=function(){return function(e){e({type:o.FETCH_WORD})}},t.fetchWords=function(e){return function(t){console.log("fetching words"),fetch("api/words/"+(e||"")).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(e){var n=e.status,a=e.json;if(n>=400)console.log("Server returned error status"),t({type:o.FETCH_WORDS_REJECTED,payload:{error:"fetching words failed"}});else{if(a[0]&&a[0].words){var l=a[0].words[0].name,s=a[0].words[0].uuid;t({type:o.FETCH_COLLECTION_FULFILLED,payload:{uuid:s,name:l}})}var i=(0,r.conflateWords)(a);t({type:o.FETCH_WORDS_FULFILLED,payload:i})}},function(e){console.log("problems"),t({type:o.FETCH_WORDS_REJECTED,payload:{error:"fetching words failed"}})})}},t.lookUpWord=function(e,t,n){return function(r){console.log("fetching word"),fetch("api/word/"+e+"/"+(n||"")).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(n){var l=n.status,s=n.json;if(l>=400)console.log("Server returned error status"),r({type:o.FETCH_WORDS_REJECTED,payload:{error:"fetching words failed",word:e}});else{var i=s,u=i[0].words[0].uuid,c=i[0].words[0].name,f=i.reduce(function(e,t){return e.word=t.word,e.description=[].concat(a(e.description?e.description:""),[{language:t.language,etymology:t.word_etymologies}]),e},{});r({type:o.FETCH_WORD_FULFILLED,payload:[f].concat(a(t))}),r({type:o.FETCH_COLLECTION_FULFILLED,payload:{uuid:u,name:c}})}},function(t){console.log("problems"),r({type:o.FETCH_WORDS_REJECTED,payload:{error:"fetching words failed",word:e}})})}}},92:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderList=t.listStyles=void 0;var o=a(n(1)),r=a(n(54));function a(e){return e&&e.__esModule?e:{default:e}}t.listStyles={1:"etym-style",2:"def-style",3:"exmpl-style"},t.renderList=function e(t,n,a,l){var s=a[l+=1];return t.length?t.map(function(t){return o.default.createElement("ul",{className:s,key:t.id},o.default.createElement("li",null,Object.entries(t).map(function(t){return"string"==typeof t[1]?o.default.createElement(r.default,{words:t[1],onLinkClick:n}):e(t[1],n,a,l)})))}):""}},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requestNote=t.clearFetchedNote=t.fetchNote=t.postNote=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(5);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.postNote=function(e,t,n,l){return function(s){console.log("posting note");var i=localStorage.getItem("uuid"),u=JSON.stringify({word:e,note:t,uuid:i});fetch("api/word/note/post/",{headers:{"Content-Type":"application/json"},body:u,method:"POST"}).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(t){var i=t.status,u=t.json;i>=400?(console.log(i),console.log(u),console.log("Server returned error status when fetching notes"),s({type:r.FETCH_NOTE_REJECTED,payload:{allNotes:o({},n,a({},e,{error:!0})),fetchingMap:o({},l,a({},e,!1))}})):(console.log(u),s({type:r.FETCH_NOTE_FULFILLED,payload:{allNotes:o({},n,a({},e,u)),fetchingMap:o({},l,a({},e,!1))}}))},function(t){console.log("problems"),s({type:r.FETCH_NOTE_REJECTED,payload:{allNotes:o({},n,a({},e,json)),fetchingMap:o({},l,a({},e,!1))}})})}},t.fetchNote=function(e,t,n){return function(l){console.log("fetching word notes");var s=localStorage.getItem("uuid");fetch("api/word/note/"+e+"/"+s).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(s){var i=s.status,u=s.json;i>=400?(console.log("Server returned error status when fetching notes"),l({type:r.FETCH_NOTE_REJECTED,payload:{allNotes:o({},t,a({},e,{error:!0})),fetchingMap:o({},n,a({},e,!1))}})):(console.log(u),l({type:r.FETCH_NOTE_FULFILLED,payload:{allNotes:o({},t,a({},e,u)),fetchingMap:o({},n,a({},e,!1))}}))},function(e){console.log("problems"),l({type:r.FETCH_NOTE_REJECTED,payload:"fetching note failed"})})}},t.clearFetchedNote=function(){return function(e){console.log("clearing fetched"),e({type:r.CLEAR_FETCHED_NOTE})}},t.requestNote=function(e,t){return function(n){console.log("requesting word note"),n({type:r.FETCH_NOTE,payload:o({},t,a({},e,!0))})}}},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveCollection=t.fetchCollection=t.fetchCollections=t.requestCollection=t.requestCollections=t.clearFetched=t.requestSave=void 0;var o=n(5),r=n(66);t.requestSave=function(){return function(e){console.log("requesting save"),e({type:o.SAVE_COLLECTION})}},t.clearFetched=function(){return function(e){console.log("clearing fetched colection name"),e({type:o.CLEAR_FETCHED})}},t.requestCollections=function(){return function(e){console.log("requesting collections"),e({type:o.FETCH_COLLECTIONS})}},t.requestCollection=function(){return function(e){console.log("requesting collection"),e({type:o.FETCH_WORDS}),e({type:o.FETCH_COLLECTION})}},t.fetchCollections=function(){return function(e,t){console.log("fetching collections");var n={"Content-Type":"application/json"},r=t().auth.token;console.log(r),r&&(n.Authorization="Token "+r),fetch("api/collection/",{headers:n}).then(function(e){return e.json()}).then(function(t){e({type:o.FETCH_COLLECTIONS_FULFILLED,payload:t})})}},t.fetchCollection=function(e){return function(t,n){console.log("fetching words for collection");var a={"Content-Type":"application/json"},l=n().auth.token;l&&(a.Authorization="Token "+l),console.log(l),fetch("api/collection/"+e,{headers:a}).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(e){var n=e.status,a=e.json;if(n>=400)console.log("Server returned error status"),t({type:"AUTHENTICATION_ERROR",payload:"saving words failed"}),t({type:o.FETCH_COLLECTION_REJECTED,payload:"fetching words collection failed"}),t({type:o.FETCH_WORDS_REJECTED,payload:{error:!1}});else{var l=a;console.log(l);var s=(0,r.conflateWords)(l.words);t({type:o.FETCH_WORDS_FULFILLED,payload:s}),t({type:o.FETCH_COLLECTION_FULFILLED,payload:{uuid:l.uuid,name:l.name}})}},function(e){console.log("problems"),t({type:o.FETCH_COLLECTION_REJECTED,payload:"fetching words collection failed"})})}},t.saveCollection=function(e,t,n){return function(r,a){console.log("saving words"),console.log(t);var l=a().auth.token,s={Accept:"application/json","Content-Type":"application/json"};console.log(l),l&&(s.Authorization="Token "+l),fetch("api/collection/",{method:"POST",headers:s,body:JSON.stringify({collection:n,name:e,uuid:t})}).then(function(e){return e.json().then(function(t){return{status:e.status,json:t}})}).then(function(e){var t=e.status,n=e.json;if(t>=400)console.log("Server returned error status"),r({type:"AUTHENTICATION_ERROR",payload:"saving words failed"}),r({type:o.SAVE_COLLECTION_REJECTED,payload:"saving words failed"});else{var a=n;r({type:o.SAVE_COLLECTION_FULFILLED,payload:a}),r({type:o.FETCH_NOTE_FULFILLED,payload:{allNotes:{},fetchingMap:{}}}),r({type:o.SWITCH_TAB,payload:{mapTabIndex:{}}}),r({type:o.FETCH_WORDS_FULFILLED,payload:[]})}},function(e){console.log("problems"),r({type:o.SAVE_COLLECTION_REJECTED,payload:"saving words failed"})})}}},95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=h(r),l=h(n(11)),s=h(n(0)),i=h(n(96)),u=h(n(48)),c=n(10),f=n(78),d=n(16),p=h(n(58));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollToDomRef=function(){var e=l.default.findDOMNode(n.myRef.current);window.scrollTo(0,e.offsetTop-35)},n.addRow=n.addRow.bind(n),n.myRef=a.default.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentWillMount",value:function(){console.log("mounting table"),this.props.requestWords(),this.props.fetchWords(this.props.uuid)}},{key:"addRow",value:function(e,t){if(console.log("look up"),e.preventDefault(),console.log("checking map"),!this.props.allWordsMap[t]){this.props.requestWord();var n=this.props.uuid;this.props.lookUpWord(t,this.props.data,n)}this.scrollToDomRef()}},{key:"render",value:function(){var e=this,t=this.props.data,n=this.props.allFetching,o=this.props.collFetching;console.log(n);var r=this.props.newWordFetching;if(n||o)return a.default.createElement(p.default,{className:"body-with-image"},a.default.createElement("div",{className:"words-container"},a.default.createElement("em",null,"Loading...")));var l=this.props.auth;return t.length?a.default.createElement(p.default,{className:t.length<6?"body-with-image":""},a.default.createElement("div",{className:"words-container",ref:this.myRef},r?a.default.createElement("em",null,"Loading..."):"",a.default.createElement("h2",{className:"coll-title"},"Showing ",a.default.createElement("strong",null,t.length," word",t.length>1?"s":"")),a.default.createElement("div",{className:"words-table"},a.default.createElement("div",{className:"words-head"},Object.entries(t[0]).map(function(e,t){return a.default.createElement("p",null,e[0])})),a.default.createElement("div",{className:"words-rows"},t.map(function(t){var n=t.word;return Object.entries(t).map(function(t){return a.default.createElement("div",{className:"word-cell"},a.default.createElement("div",{className:"word",key:(0,u.default)(t)},"string"==typeof t[1]?a.default.createElement("strong",null,t[1]):a.default.createElement(i.default,{word:n,element:t[1],fn:[e.addRow]})))})}))))):a.default.createElement(p.default,{className:"body-with-image"},a.default.createElement("div",{className:"words-container",ref:this.myRef},a.default.createElement("div",{className:"words-invite"},"Start new collection",l.isAuthenticated?"":a.default.createElement("span",null," or ",a.default.createElement(d.Link,{className:"is-link",to:"/login"},"Login")," or ",a.default.createElement(d.Link,{className:"is-link",to:"/register"},"Register")))))}}]),t}();m.propTypes={data:s.default.array.isRequired,lookUpWord:s.default.func.isRequired,fetchWords:s.default.func.isRequired,requestWords:s.default.func.isRequired,requestWord:s.default.func.isRequired};t.default=(0,c.connect)(function(e){return{auth:e.auth,uuid:e.collections.uuid,data:e.words.items,allWordsMap:e.words.allWordsMap,allFetching:e.words.allWordsFetching,collFetching:e.collections.fetching,wordFetching:e.words.newWordFetching}},{lookUpWord:f.lookUpWord,fetchWords:f.fetchWords,requestWords:f.requestWords,requestWord:f.requestWord})(m)},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1),a=v(r),l=v(n(0)),s=n(143),i=(v(n(54)),v(n(98))),u=v(n(133)),c=v(n(134)),f=v(n(135)),d=(v(n(48)),n(10)),p=n(136),h=n(137),m=n(138),y=n(139),g=n(93),E=n(92);function v(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.handleSelect=n.handleSelect.bind(n);var o=n.props.mapTabIndex[n.props.word];return n.state={tabIndex:o||0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"handleSelect",value:function(e,t,n,o){this.props.switchTab(t,n,this.props.mapTabIndex),this.setState({tabIndex:t});var r={};switch(r=o?{1:"TRANSLATIONS",2:"COLLOCATIONS",3:"SYNONYMS",4:"ADD_NOTE"}:{1:"COLLOCATIONS",2:"SYNONYMS",3:"ADD_NOTE"},console.log(r),console.log(r[t]),r[t]){case"ADD_NOTE":this.props.allNotes[n]||(console.log("looking up notes"),this.props.requestNote(n,this.props.notesFetchingMap),this.props.fetchNote(n,this.props.allNotes,this.props.notesFetchingMap));break;case"TRANSLATIONS":this.props.allTranslations[n]||(console.log("looking up translations"),this.props.requestTranslations(n,this.props.transFetchingMap),this.props.lookUpTranslations(n,this.props.allTranslations,this.props.transFetchingMap));break;case"COLLOCATIONS":this.props.allCollocations[n]||(console.log("looking up collocations"),this.props.requestCollocations(n,this.props.collocsFetchingMap),this.props.lookUpCollocations(n,this.props.allCollocations,this.props.collocsFetchingMap));break;case"SYNONYMS":console.log(this.props.allSynonyms),this.props.allSynonyms[n]||(console.log("looking up synonyms"),this.props.requestSynonyms(n,this.props.synonymsFetchingMap),console.log("after request up synonyms"),this.props.lookUpSynonyms(n,this.props.allSynonyms,this.props.synonymsFetchingMap));break;default:Function.prototype()}}},{key:"render",value:function(){var e=this,t=this.props,n=t.word,o=t.element,r=t.fn,l=o.reduce(function(e,t){return"english"===t.language?++e:e},0);return a.default.createElement(s.Tabs,{selectedIndex:this.state.tabIndex,onSelect:function(t,o){return e.handleSelect(o,t,n,l)}},a.default.createElement(s.TabList,null,a.default.createElement(s.Tab,null,"Original Word"),l?a.default.createElement(s.Tab,null,"Translations"):a.default.createElement(s.Tab,null,"Collocations"),l?a.default.createElement(s.Tab,null,"Collocations"):a.default.createElement(s.Tab,null,"Synonyms"),l?a.default.createElement(s.Tab,null,"Synonyms"):a.default.createElement(s.Tab,null,"Add Note"),l?a.default.createElement(s.Tab,null,"Add Note"):""),a.default.createElement(s.TabPanel,null,o.map(function(e){return a.default.createElement("div",null,a.default.createElement("p",{className:"heading lang-head lang-"+e.language},e.language),(0,E.renderList)(e.etymology,r[0],E.listStyles,0))})),a.default.createElement(s.TabPanel,null,l?a.default.createElement(i.default,{word:n,fn:r[0]}):a.default.createElement(u.default,{word:n,fn:r[0]})),a.default.createElement(s.TabPanel,null,l?a.default.createElement(u.default,{word:n,fn:r[0]}):a.default.createElement(c.default,{word:n,fn:r[0]})),l?a.default.createElement(s.TabPanel,null,a.default.createElement(c.default,{word:n,fn:r[0]})):a.default.createElement(s.TabPanel,null,a.default.createElement(f.default,{word:n})),l?a.default.createElement(s.TabPanel,null,a.default.createElement(f.default,{word:n})):"")}}]),t}();b.propTypes={switchTab:l.default.func.isRequired,lookUpTranslations:l.default.func.isRequired,word:l.default.string.isRequired,element:l.default.array.isRequired};var w={switchTab:p.switchTab,lookUpTranslations:h.lookUpTranslations,requestTranslations:h.requestTranslations,lookUpCollocations:m.lookUpCollocations,requestCollocations:m.requestCollocations,lookUpSynonyms:y.lookUpSynonyms,requestSynonyms:y.requestSynonyms,fetchNote:g.fetchNote,requestNote:g.requestNote};t.default=(0,d.connect)(function(e){return{mapTabIndex:e.tabs.mapTabIndex,allTranslations:e.translations.allTranslations,allSynonyms:e.synonyms.allSynonyms,allCollocations:e.collocations.allCollocations,allNotes:e.notes.allNotes,transFetchingMap:e.translations.fetchingMap,notesFetchingMap:e.notes.fetchingMap,collocsFetchingMap:e.collocations.fetchingMap,synonymsFetchingMap:e.synonyms.fetchingMap}},w)(b)},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(1)),r=s(n(0)),a=s(n(54)),l=(s(n(48)),n(10));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.word,n=e.trans,r=e.fn,l=e.fetchingMap,s=n[t];return l[t]?o.default.createElement("em",null,"Loading..."):s.error?o.default.createElement("div",{className:"notify-warn"},"No translation"):Object.keys(s).map(function(e){return o.default.createElement("div",{className:"etym-style"},o.default.createElement("p",{className:"heading lang-head lang-"+e},e),o.default.createElement(a.default,{words:s[e].join(", "),onLinkClick:r}))})};i.propTypes={word:r.default.string.isRequired,trans:r.default.object.isRequired,fetchingMap:r.default.object.isRequired,fn:r.default.func.isRequired},t.default=(0,l.connect)(function(e){return{trans:e.translations.allTranslations,fetchingMap:e.translations.fetchingMap}})(i)}}]);